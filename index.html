<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=2.0,minimum-scale=1.0,user-scalable=yes">

<!-- <link rel="manifest" href="../manifest.json"> -->
<link rel="manifest" href="manifest.json">
<title>MyPage｜デモこども園</title>
<script src=https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js defer></script>
<script>
  window.OneSignalDeferred = window.OneSignalDeferred || [];
  OneSignalDeferred.push(function(OneSignal) {
    OneSignal.init({
      appId: "6970c1c2-d726-4426-ac3b-b029c0fc0bce",
      safari_web_id: "web.onesignal.auto.235723f6-f2ef-49f2-bb5e-e966332d4e54",
      notifyButton: {
        enable: true,
      },
    webhooks: {
      cors: true, // Defaults to false if omitted
      'notification.willDisplay': 'https://enjkc0v93uybm.x.pipedream.net',
      'notification.clicked': 'https://enjkc0v93uybm.x.pipedream.net', 
      'notification.dismissed': 'https://enjkc0v93uybm.x.pipedream.net'
    },
    serviceWorkerParam: { scope: "/one-signal-static-website/" },
    serviceWorkerPath: "one-signal-static-website/OneSignalSDKWorker.js",
    });
  });
</script>
<!-- <script src=https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js?v=160101 defer></script> -->
<!-- <script>
window.OneSignalDeferred = window.OneSignalDeferred || [];
OneSignalDeferred.push(function(OneSignal) {
  OneSignal.init({
    appId: "6970c1c2-d726-4426-ac3b-b029c0fc0bce",
    notifyButton: {
      enable: true
    },
    webhooks: {
      cors: true, // Defaults to false if omitted
      'notification.willDisplay': 'https://typedwebhook.tools/webhook/42911f55-38bb-466d-a7aa-dd941070dfa0',
      // 'notification.clicked': 'https://typedwebhook.tools/webhook/42911f55-38bb-466d-a7aa-dd941070dfa0', 
      // 'notification.displayed': 'https://typedwebhook.tools/webhook/2ecc0213-63ed-49bf-8ae4-d00a6bc02224'
      // 'notification.willDisplay': 'https://typedwebhook.tools/webhook/2ecc0213-63ed-49bf-8ae4-d00a6bc02224'
    },
    serviceWorkerParam: { scope: "/one-signal-static-website/" },
    serviceWorkerPath: "one-signal-static-website/OneSignalSDKWorker.js",
    });
  if(OneSignal) OneSignal.Notifications.addEventListener("foregroundWillDisplay", foregroundListener);
});

function foregroundListener(event) {
  console.log(`${event}`);
}
</script> -->
<!-- <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
<script>
  window.OneSignalDeferred = window.OneSignalDeferred || [];
  window.OneSignalDeferred.push(async function(OneSignal) {
    await OneSignal.init({
      appId: "6970c1c2-d726-4426-ac3b-b029c0fc0bce",
    });
    // OneSignal.Notifications.addEventListener("permissionChange", ()=>{
    //   if (!permission) {
    //     console.log('promptSlide')
    //     OneSignal.Slidedown.promptPush()
    //   }
    // });
  }); 
  // OneSignal.Notifications.permission
  // function permissionChangeListener(permission) {

  //   if (!permission) {
  //       console.log('promptSlide')
  //       OneSignal.Slidedown.promptPush()
  //     }

  // }

  // OneSignal.Notifications.addEventListener("permissionChange", permissionChangeListener);

  // OneSignal.login("100234")
  
  // const addTag = (()=>{
  //   OneSignal.User.addTag("test", "1");
  //   alert("tag added");
  // });

  // const promptSlide = (()=>{
  //   console.log("prompt but not working")
  //   OneSignal.Slidedown.promptPush()
  // });

  // setTimeout(eventListener(), 10000);  
</script> -->

</head>
  <body class="admin bg_white">
  <header>
      <div class="head_bar">
          <div>
              <h1>OneSignal Index</h1>
          </div>
      </div>
  </header>
  <ul class="btn_wrap_mp" align="center">
    <a href="menu_test.html">menu_test</a>

    <button type="button" class="btn btn-primary" onclick="addTag()">Add Tag</button>
    <button type="button" class="btn btn-primary" onclick="promptSlide()">Prompt Slide</button>
  </ul>
  </body>
</html>
